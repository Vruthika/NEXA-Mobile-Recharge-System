<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Prepaid &amp; Postpaid Plans</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#6D28D9", // Violet
              "background-light": "#F3F4F6", // Light Gray
              "background-dark": "#1F2937", // Dark Gray
              "card-light": "#FFFFFF",
              "card-dark": "#374151",
              "text-light": "#111827",
              "text-dark": "#F9FAFB",
              "accent-light": "#E9D5FF", // Light Lavender
              "accent-dark": "#4C1D95", // Darker Violet
              "border-light": "#E5E7EB",
              "border-dark": "#4B5563",
            },
            fontFamily: {
              display: ["Poppins", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.5rem",
              lg: "1rem",
              xl: "1.5rem",
            },
          },
        },
      };
    </script>
    <style>
      body {
        font-family: "Poppins", sans-serif;
      }
      .modal-overlay {
        backdrop-filter: blur(10px);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      }
      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
    </style>
  </head>
  <body
    class="min-h-screen bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark overflow-x-hidden"
  >
    <!-- Full Width Header -->
    <div id="navbar"></div>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <main class="py-8">
        <div class="text-center mb-10">
          <div
            class="inline-flex bg-card-light dark:bg-card-dark p-1 rounded-full border border-border-light dark:border-border-dark"
          >
            <button
              id="prepaid-tab"
              class="px-6 sm:px-8 py-2 rounded-full bg-primary text-white text-base sm:text-lg font-semibold transition-all"
            >
              Prepaid
            </button>
            <button
              id="postpaid-tab"
              class="px-6 sm:px-8 py-2 rounded-full text-text-light dark:text-text-dark text-base sm:text-lg font-semibold transition-all hover:bg-gray-100 dark:hover:bg-gray-600"
            >
              Postpaid
            </button>
          </div>
        </div>

        <div class="flex flex-col lg:flex-row gap-8">
          <!-- Sidebar -->
          <aside class="w-full lg:w-1/4">
            <!-- Recharge Number Display -->
            <div
              id="rechargeNumberCard"
              class="bg-card-light dark:bg-card-dark p-4 rounded-xl border border-border-light dark:border-border-dark mb-6"
            >
              <div class="flex justify-between items-center">
                <div>
                  <p class="text-sm text-gray-500 dark:text-gray-400">
                    Recharging for
                  </p>
                  <p id="rechargeNumberDisplay" class="font-bold text-lg"></p>
                </div>
                <button
                  id="changeRechargeNumber"
                  class="text-primary hover:text-primary-dark text-sm flex items-center"
                  onclick="showChangeNumberModal()"
                >
                  <span class="material-icons text-sm mr-1">edit</span>
                  Change
                </button>
              </div>
            </div>

            <h2 class="text-xl font-semibold mb-4">Plan Category</h2>
            <div class="space-y-2" id="category-list">
              <!-- Categories will be loaded dynamically -->
              <div class="text-center py-4">
                <div
                  class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"
                ></div>
              </div>
            </div>
          </aside>

          <!-- Main Content -->
          <div class="w-full lg:w-3/4">
            <div
              class="flex flex-col sm:flex-row justify-between items-center mb-6"
            >
              <h2
                class="text-2xl sm:text-3xl font-bold mb-4 sm:mb-0"
                id="section-title"
              >
                Popular Plans
              </h2>
              <!-- <div class="relative">
                <input
                  id="plan-search"
                  class="bg-card-light dark:bg-card-dark border border-border-light dark:border-border-dark rounded-full py-2 px-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary text-sm"
                  placeholder="Search plans..."
                  type="text"
                />
                <span
                  class="material-icons absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
                  >search</span
                >
              </div> -->
            </div>

            <!-- Plans Container -->
            <div id="plans-container">
              <!-- Loading state -->
              <div class="text-center py-12">
                <div
                  class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"
                ></div>
                <p class="text-gray-600 dark:text-gray-400">Loading plans...</p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Plan Details Modal -->
    <div id="plan-modal" class="fixed inset-0 z-50 hidden">
      <div
        class="modal-overlay absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"
      >
        <div
          class="bg-card-light dark:bg-card-dark rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto relative"
        >
          <button
            id="close-modal"
            class="absolute top-4 right-4 w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
          >
            <span class="material-icons">close</span>
          </button>

          <div class="p-8">
            <div class="text-center mb-6">
              <div
                class="w-20 h-20 bg-gradient-to-r from-primary to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-4"
              >
                <span class="material-icons text-white text-3xl">sim_card</span>
              </div>
              <h3 class="text-2xl font-bold mb-2" id="modal-plan-name">
                Plan Name
              </h3>
              <p
                class="text-gray-600 dark:text-gray-400"
                id="modal-plan-category"
              >
                Category
              </p>
            </div>

            <div class="space-y-6">
              <div class="text-center">
                <div
                  class="text-4xl font-bold text-primary mb-2"
                  id="modal-plan-price"
                >
                  â‚¹0
                </div>
                <p
                  class="text-gray-600 dark:text-gray-400"
                  id="modal-plan-validity"
                >
                  Validity
                </p>
              </div>

              <div>
                <h4 class="font-semibold mb-3">Description</h4>
                <p
                  class="text-gray-600 dark:text-gray-400"
                  id="modal-plan-description"
                >
                  Plan description
                </p>
              </div>

              <div>
                <h4 class="font-semibold mb-3">Benefits</h4>
                <ul class="space-y-2" id="modal-plan-benefits">
                  <!-- Benefits will be loaded dynamically -->
                </ul>
              </div>

              <button
                id="buy-now-button"
                class="w-full bg-gradient-to-r from-primary to-purple-600 text-white py-4 rounded-xl font-semibold text-lg hover:shadow-lg transition-all"
              >
                Buy Now
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Change Number Modal -->
    <div id="change-number-modal" class="fixed inset-0 z-50 hidden">
      <div class="absolute inset-0 bg-black bg-opacity-50 modal-overlay"></div>
      <div
        class="relative z-10 flex items-center justify-center min-h-screen p-4"
      >
        <div
          class="bg-card-light dark:bg-card-dark rounded-2xl shadow-xl max-w-md w-full p-6 animate-fadeIn"
        >
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold">Change Recharge Number</h3>
            <button
              onclick="closeChangeNumberModal()"
              class="text-gray-500 hover:text-gray-700"
            >
              <span class="material-icons">close</span>
            </button>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-medium mb-2">Mobile Number</label>
            <input
              type="text"
              id="changeNumberInput"
              class="w-full px-4 py-3 rounded-xl border border-border-light dark:border-border-dark focus:ring-2 focus:ring-primary focus:border-transparent"
              placeholder="Enter 10-digit mobile number"
              maxlength="10"
            />
          </div>

          <div class="flex justify-end space-x-3">
            <button
              onclick="closeChangeNumberModal()"
              class="px-4 py-2 border border-border-light dark:border-border-dark rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"
            >
              Cancel
            </button>
            <button
              onclick="updateRechargeNumber()"
              class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-purple-700"
            >
              Update
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Activation Success Animation -->
    <div id="activation-animation" class="fixed inset-0 z-50 hidden">
      <div
        class="absolute inset-0 bg-white dark:bg-gray-900 flex items-center justify-center"
      >
        <div class="text-center p-8">
          <div
            class="w-24 h-24 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-6"
          >
            <svg
              class="w-12 h-12 text-green-500"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 13l4 4L19 7"
              ></path>
            </svg>
          </div>
          <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">
            Plan Activated Successfully!
          </h3>
          <p class="text-gray-600 dark:text-gray-400 mb-6">
            Your postpaid plan <span id="activation-plan-name"></span> has been
            activated and will be effective immediately.
          </p>
          <button
            id="done-button"
            class="bg-primary hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-medium text-lg transition-colors"
          >
            Done
          </button>
        </div>
      </div>
    </div>

    <div id="footer"></div>

    <script src="./plans.js"></script>
    <script src="/components/navbar.js"></script>
  </body>
</html>
